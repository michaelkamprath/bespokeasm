description: KENBAK-1 ISA
general:
  address_size: 8
  endian: big
  registers:
    - a
    - b
    - x
  identifier:
    name: kenbak-1
    version: "1.0.0"
    extension: kb1  
operand_sets:
  register_operands:
    operand_values:
      register_a:
        type: register
        register: a
        bytecode:
          value: 0
          size: 2
          position: prefix
      register_b:
        type: register
        register: b
        bytecode:
          value: 1
          size: 2
          position: prefix
      register_x:
        type: register
        register: x
        bytecode:
          value: 2
          size: 2
          position: prefix
  memory_operands:
    operand_values:
      immediate:
        type: numeric
        bytecode:
          value: 3
          size: 3
        argument:
          size: 8
          byte_align: true
      indirect_addr:
        type: indirect_numeric
        bytecode:
          value: 4
          size: 3
        argument:
          size: 8
          byte_align: true
      deferred_addr:
        type: deferred_numeric
        bytecode:
          value: 5
          size: 3
        argument:
          size: 8
          byte_align: true
instructions:
  ld:
    byte_code:
      value: 2
      size: 3
    operands:
      count: 2
      operand_sets:
        list:
          - register_operands
          - memory_operands
    variants:
      # "store" variant
      - byte_code:
          value: 3
          size: 3
        operands:
          count: 2
          operand_sets:
            list:
              - memory_operands
              - register_operands
  add:
    byte_code:
      value: 0
      size: 3
    operands:
      count: 2
      operand_sets:
        list:
          - register_operands
          - memory_operands
  sub:
    byte_code:
      value: 1
      size: 3
    operands:
      count: 2
      operand_sets:
        list:
          - register_operands
          - memory_operands
  and:
    byte_code:
      value: 26
      size: 5
    operands:
      count: 1
      operand_sets:
        list:
          - memory_operands
  or:
    byte_code:
      value: 24
      size: 5
    operands:
      count: 1
      operand_sets:
        list:
          - memory_operands
  lneg:
    byte_code:
      value: 27
      size: 5
    operands:
      count: 1
      operand_sets:
        list:
          - memory_operands
  jmp:
    byte_code:
      value: 231
      size: 8
    operands:
      count: 1
      specific_operands:
        direct:
          list:
            immediate_addr:
              type: numeric
              argument:
                size: 8
                byte_align: true
    variants:
      - byte_code:
          value: 239
          size: 8
        operands:
          count: 1
          specific_operands:
            deferred:
              list:
                deferred_addr:
                  type: deferred_numeric
                  bytecode:
                    value: 5
                    size: 3
                  argument:
                    size: 8
                    byte_align: true