description: Eater SAP-1 ISA
general:
  min_version: 0.5.0
  address_size: 4
  identifier:
    name: eater-sap1
    version: "1.0.1"
    extension: sap1
  registers:
    a:
      description: Accumulator register
    b:
      description: Temp register
    pc:
      description: Program Counter
    out:
      description: Output register
  flags:
    CF:
      name: carry
      description: The carry flag generated from addtion and subtraction
    ZF:
      name: zero
      description: The zero flag generated by the contents of the A register.
  documentation:
    description: Ben Eater SAP-1
    details:
operand_sets:
  integer:
    operand_values:
      int8:
        type: numeric
        argument:
          size: 4
          byte_align: false
  address:
    operand_values:
      addr:
        type: numeric
        argument:
          size: 4
          byte_align: false
instructions:
  nop:
    bytecode:
      value: 0
      size: 4
    documentation:
      category: operations
      description: no opperation
      details: Makes no changes to any register of memory address. However, `pc` does incrmeent and clock cycles are epxended.
  lda:
    bytecode:
      value: 1
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: data movement
      description: Load A
      details: Load register `a` with value at address provided as an operand
      modifies:
      - register: a
  add:
    bytecode:
      value: 2
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: arithmetic
      description: Add to `A`
      details: Adds the value at provided address to the contents in `a` register
      modifies:
      - register: "`a`"
        description: will contain the results of the addition
      - flag: carry
        description: Set to the value of the 8-bit addition carry bit.
      - flag: zero
        description: Set to 1 if register A is equal to zero, 0 otherwise.
  sub:
    bytecode:
      value: 3
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: arithmetic
      description: Subtract from `A`
      details: Subtracts the value at provided address from the contents in `a` register
      modifies:
      - register: "`a`"
        description: will contain the results of the subtraction
      - flag: carry
      - flag: zero
  sta:
    bytecode:
      value: 4
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: data movement
      description: Store `A`
      details: Writes value in register `a` to memory at the address provided as an operand
      modifies:
      - memory: address in operand value
        description: Will contain the value originally in `a` register
  ldi:
    bytecode:
      value: 5
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - integer
    documentation:
      category: data movement
      description: Load Immediate
      details: load register `a` with the 4-bit immediate value provided in the operand
      modifies:
      - register: "`a`"
        description: Will be set to the value of the immediate operand
  jmp:
    bytecode:
      value: 6
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: control
      description: Jump
      details: Set program counter to address provided in operand, making the next instruction to be executed from that address.
      modifies:
      - register: "`pc`"
        description: Will contrain memory address passed in operand
  jc:
    bytecode:
      value: 7
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: control
      description: Jump if Carry Set
      details: Set program counter to address provided in operand if carry flag is set
      modifies:
      - register: "`pc`"
        description: Will contrain memory address passed in operand if condition is true
  jz:
    bytecode:
      value: 8
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: control
      description: Jump if Zero Set
      details: Set program counter to address provided in operand if zero flag is set
      modifies:
      - register: "`pc`"
        description: Will contrain memory address passed in operand if condition is true
  out:
    bytecode:
      value: 14
      size: 4
    documentation:
      category: input/output
      description: Display Value
      details: Copies value in register `a` to `out` register, displaying it on the 7 segment LED display as decimal
      modifies:
      - register: "`out`"
  hlt:
    bytecode:
      value: 15
      size: 4
    documentation:
      category: control
      description: Halt Clock
      details: Halt the computer clock, stopping all execution.
