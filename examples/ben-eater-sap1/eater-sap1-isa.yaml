description: Eater SAP-1 ISA
general:
  min_version: 0.5.0
  address_size: 4
  identifier:
    name: eater-sap1
    version: "1.0.1"
    extension: sap1
  registers:
  - a
  - b
  - pc
  - out
  documentation:
    description: Ben Eater SAP-1
    details:
    flags:
    - name: carry
      symbol: CF
      description: The carry flag generated from addtion and subtraction
    - name: zero
      symbol: ZF
      description: The zero flag generated by the contents of the A register.
operand_sets:
  integer:
    operand_values:
      int8:
        type: numeric
        argument:
          size: 4
          byte_align: false
  address:
    operand_values:
      addr:
        type: numeric
        argument:
          size: 4
          byte_align: false
instructions:
  nop:
    bytecode:
      value: 0
      size: 4
    documentation:
      category: operations
      description: no opperation
  lda:
    bytecode:
      value: 1
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: data movement
      description: Load A
      details: load register A with value at address provided as an operand
      modifies:
      - register: a
  add:
    bytecode:
      value: 2
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: arithmetic
      description: Add to A
      details: adds the value at provided address to the contents in A register
      modifies:
      - register: a
        description: will contain the results of the addition
      - flag: carry
      - flag: zero
  sub:
    bytecode:
      value: 3
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: arithmetic
      description: Subtract from A
      details: subtracts the value at provided address from the contents in A register
      modifies:
      - register: a
        description: will contain the results of the subtraction
      - flag: carry
      - flag: zero
  sta:
    bytecode:
      value: 4
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: data movement
      description: Store A
      details: writes value in register A to memory at the address provided as an operand
      modifies:
      - memory: address in operand value
  ldi:
    bytecode:
      value: 5
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - integer
    documentation:
      category: data movement
      description: Load Immediate
      details: load register A with the immediate value provided in the operand
      modifies:
      - register: a
  jmp:
    bytecode:
      value: 6
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: control
      description: Jump
      details: set program counter to address provided in operand
      modifies:
      - register: pc
  jc:
    bytecode:
      value: 7
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: control
      description: Jump if Carry Set
      details: set program counter to address provided in operand if carry flag is set
      modifies:
      - register: pc
  jz:
    bytecode:
      value: 8
      size: 4
    operands:
      count: 1
      operand_sets:
        list:
          - address
    documentation:
      category: control
      description: Jump if Zero Set
      details: set program counter to address provided in operand if zero flag is set
      modifies:
      - register: pc
  out:
    bytecode:
      value: 14
      size: 4
    documentation:
      category: input/output
      description: Display Value
      details: Writes value in register A to the output register, causing it to be displayed.
      modifies:
      - register: out
  hlt:
    bytecode:
      value: 15
      size: 4
    documentation:
      category: control
      description: Halt Clock
      details: Halt the computer clock, stopping all operations.
